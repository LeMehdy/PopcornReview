<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PopcornReview</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="/static/styles.css" rel="stylesheet">
   
</head>
<body>
    <!-- Ajoutez l'en-tête de votre site ici -->
    <%- include("header.ejs"); %> 
    <div class="container mt-4">
        <h1>Liste des Films</h1>

        <!-- Dropdown pour sélectionner le tri -->
        <div class="mb-3">
            <label for="sortSelect" class="form-label">Trier par :</label>
            <select class="form-select" id="sortSelect">
                <option value="date">Date de Sortie</option>
                <option value="popularity">Popularité</option>
                <option value="alphabetical">Ordre Alphabétique</option>
            </select>
        </div>

        <!-- Section pour afficher la liste des films -->
        <div class="row row-cols-5 g-4">
            <% movies.forEach((movie, index) => { %>
                <div class="col">
                    <a href="/movie-details/<%= movie.id %>">
                        <img src="https://image.tmdb.org/t/p/w500/<%= movie.poster_path %>" alt="<%= movie.title %>" class="img-fluid">
                    </a>
                </div>
                <% if ((index + 1) % 10 === 0) { %>
                    </div><div class="row row-cols-5 g-4">
                <% } %>
            <% }); %>
        </div>
        <!-- Pagination -->
        <div class="d-flex justify-content-center mt-4">
            <% for (let i = 1; i <= totalPages; i++) { %>
                <a href="/movies?page=<%= i %>" class="btn btn-outline-primary me-2 mb-2"><%= i %></a>
            <% } %>
        </div>

    <!-- Scripts -->
    <%- include("footer.ejs"); %> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Script pour trier les films lors de la sélection dans le dropdown
        document.getElementById('sortSelect').addEventListener('change', function() {
            const sortValue = this.value; // Récupère la valeur de tri sélectionnée
            // Ici, insérez le code pour récupérer les films triés selon sortValue (date, popularité ou ordre alphabétique)
            // Mettez à jour le contenu de #movieList avec les films triés
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ejs@3.1.6/ejs.min.js"></script>
    <!-- Ajoutez d'autres scripts au besoin -->
</body>

</html>

